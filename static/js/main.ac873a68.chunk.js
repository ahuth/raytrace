(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(t,n,e){"use strict";e.r(n);var a={};e.r(a),e.d(a,"camera",function(){return k}),e.d(a,"lights",function(){return M}),e.d(a,"objects",function(){return D});var r=e(0),i=e.n(r),c=e(2),o=e.n(c),u=e(3),l=e(4),s=e(6),p=e(5),f=e(7),d=m(0,1,0),v=m(255,255,255),h=m(0,0,0);function m(t,n,e){return{x:t,y:n,z:e}}function y(t,n){return t.x*n.x+t.y*n.y+t.z*n.z}function b(t,n){return m(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z,t.x*n.y-t.y*n.x)}function x(t,n){return m(t.x*n,t.y*n,t.z*n)}function g(t){return x(t,1/function(t){return Math.sqrt(y(t,t))}(t))}function z(t,n){return m(t.x+n.x,t.y+n.y,t.z+n.z)}function j(t,n,e){return m(t.x+n.x+e.x,t.y+n.y+e.y,t.z+n.z+e.z)}function w(t,n){return m(t.x-n.x,t.y-n.y,t.z-n.z)}var k={point:m(0,1.8,10),fieldOfView:45,vector:m(0,3,0)},M=[m(-30,-10,20)];function E(t){return{point:t.point,color:t.color,specular:t.specular,lambert:t.lambert,ambient:t.ambient,radius:t.radius}}function O(t,n){var e=w(t.point,n.point),a=y(e,n.vector),r=y(e,e),i=t.radius*t.radius-r+a*a;if(!(i<0))return a-Math.sqrt(i)}var D=[E({point:m(0,3.5,-3),color:m(155,200,155),specular:.2,lambert:.7,ambient:.1,radius:3}),E({point:m(-4,2,-1),color:m(155,155,155),specular:.1,lambert:.9,ambient:0,radius:.2}),E({point:m(-4,3,-1),color:m(255,255,255),specular:.2,lambert:.7,ambient:.1,radius:.1})];function I(t,n){return{point:t,vector:n}}function C(t,n,e){if(!(e>3)){var a=P(t,n),r=a.distance,i=a.object;if(r===1/0)return v;var c=z(t.point,x(t.vector,r));return function(t,n,e,a,r,i){var c=e.color,o=h,u=0;if(e.lambert)for(var l=0;l<n.lights.length;l++){var s=n.lights[l];if(R(a,n,s)){var p=y(g(w(s,a)),r);p>0&&(u+=p)}}if(e.specular){var f=I(a,function(t,n){var e=x(n,y(t,n));return w(x(e,2),t)}(t.vector,r)),d=C(f,n,i+1);d&&(o=z(o,x(d,e.specular)))}return u=Math.min(1,u),j(o,x(c,u*e.lambert),x(c,e.ambient))}(t,n,i,c,g(w(c,i.point)),e)}}function P(t,n){for(var e={distance:1/0,object:null},a=0;a<n.objects.length;a++){var r=n.objects[a],i=O(r,t);null!=i&&i<e.distance&&(e={distance:i,object:r})}return e}function R(t,n,e){return P(I(t,g(w(t,e))),n).distance>-.005}var S=function(t){function n(){var t,e;Object(u.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=Object(s.a)(this,(t=Object(p.a)(n)).call.apply(t,[this].concat(c)))).canvasRef=i.a.createRef(),e.playing=!1,e.planet1=0,e.planet2=0,e.handlePlay=function(){e.playing=!0,e.tick()},e.handleStop=function(){e.playing=!1},e.tick=function(){e.planet1+=.1,e.planet2+=.2,D[1].point.x=3.5*Math.sin(e.planet1),D[1].point.z=3.5*Math.cos(e.planet1)-3,D[2].point.x=4*Math.sin(e.planet2),D[2].point.z=4*Math.cos(e.planet2)-3;var t=function(t,n,e,a){for(var r=t.camera,i=g(w(r.vector,r.point)),c=g(b(i,d)),o=g(b(c,i)),u=Math.PI*(r.fieldOfView/2)/180,l=n/e,s=Math.tan(u),p=l*s,f=2*s/(e-1),v=2*p/(n-1),h=0;h<e;h++)for(var m=0;m<n;m++){var y=x(c,h*f-s),z=x(o,m*v-p),k=C(I(r.point,g(j(i,y,z))),t,0),M=4*h+m*e*4;a.data[M+0]=k.x,a.data[M+1]=k.y,a.data[M+2]=k.z,a.data[M+3]=255}return a}(a,240,320,e.pixelData);e.ctx.putImageData(t,0,0),e.playing&&setTimeout(e.tick,10)},e}return Object(f.a)(n,t),Object(l.a)(n,[{key:"componentDidMount",value:function(){this.ctx=this.canvasRef.current.getContext("2d"),this.pixelData=this.ctx.getImageData(0,0,320,240),this.tick()}},{key:"render",value:function(){return i.a.createElement("div",{style:q.container},i.a.createElement("canvas",{height:240,ref:this.canvasRef,style:q.canvas,width:320}),i.a.createElement("div",null,i.a.createElement("button",{onClick:this.handlePlay},"Play"),i.a.createElement("button",{onClick:this.handleStop},"Stop")))}}]),n}(i.a.Component),q={canvas:{height:480,width:640},container:{alignItems:"center",display:"flex",flexDirection:"column"}};o.a.render(i.a.createElement(S),document.getElementById("root"))},8:function(t,n,e){t.exports=e(13)}},[[8,2,1]]]);
//# sourceMappingURL=main.ac873a68.chunk.js.map